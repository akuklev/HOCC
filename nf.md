“Новые Основания” и Новые Основания 
===================================

*Годовщине изгнания из канторианского рая посвещается*

Несколько месяцев назад завершилась математическая одиссея длинной в 140 лет.

В 1884 году в работе «Die Grundlagen der Arithmetik» («Обоснования арифметики») великий логик Gottlob Frege предположил, что
натуральные числа и законы арифметики естественным образом вытекают из самой логики, безо всякой отсылки к эмпирическим
соображениям.

Без малого двадцать лет он работал над формальной системой математической логики, решающей эту задачу. Предложенная им в итоге
система не только решала эту задачу — она как будто могла служить общей базой для всей математики! Она совмещала элегантность,
минимализм и невероятную мощь. Но вдруг всё рухнуло в одночасье — философ и математик Bertrand Russell нашёл в системе формальное
противоречие.

В 1937 философ и математик Willard Quine предложил логическую систему NF (от «New Foundations for Mathematical Logic»), которая
была очень близка по построению к исходной системе Фреге, но избегала обнаруженного противоречия. Как позже выяснилось на практике
NF оказалась неудобна в качестве общей базы всей математики, но решала исходную задачу Фреге по обоснованию арифметики через редукцию
к чистой логике.
NF — чисто логическая система, в которой эмергентны натуральные числа и выводимы законы арифметики, т.н. постулаты Пеано [[Tu12](https://cs.ioc.ee/~tarmo/tsem11/tupailo2401-slides.pdf)].
Кроме того, NF является единственной известной логической системой, пригодной для рассуждения об всеобъемлющих автореферрентных
структурах, таких как множество всех множеств (включая себя) или категория всех категорий (включая себя).

Разумеется, сразу возник вопрос о непротиворечивости NF. Целый ряд результатов заставлял усомниться в её непротиворечивости,
а попытки доказать её относительную непротиворечивость десятилетиями оказывались бесплодными. И вот, спустя без малого
90 лет в этом вопросе наконец была поставлена точка: Доказательство непротиворечивости, которое предложил Randall Holmes в 2010,
в апреле было успешно формализовано и верифицировано в [Lean](https://lean-lang.org/) его аспиранткой Sky Wilshaw[[HW24](https://randall-holmes.github.io/Nfproof/maybedetangled2.pdf)].

Доказательство непротиворечивости NF — отличный повод поговорить подробнее о том, что такое теория множеств, какое отношение
она имеет к основаниям математики, причём тут логический редукционизм и какова современная точка зрения на эти вопросы.

# Аксиоматические теории, исчисление предикатов и наивная теория множеств

Около 300 года до н.э. греческий философ и математик Евклид Александрийский написал монографию «Начала» (Στοιχεῖα), где он
демонстрирует на огромном количестве примеров, что всевозможные свойства геометрических фигур, выводимы при помощи законов
логики из небольшого набора постулатов (“аксиом”). Так родилось понятие аксиоматической теории.

Прежде чем записывать постулаты, нужно перечислить специфичные для данной теории понятия: разновидности упоминающихся в
постулатах сущностей (точки, линии и длины) и отношения между сущностями (параллельность линий, принадлежность точки
линии, ...). Такой “словарик понятий, принятых в качестве базовых” называется сигнатурой теории. Язык, на котором
записываются постулаты и другие утверждения теории, образуется понятиями теории (сигнатурой) и общелогической базой:
кванторами, логическими связками, отношением равенства. Вот эта общая часть языков всех аксиоматических теорий называется
**исчислением предикатов**.

Кроме эвклидовой геометрии имеются сотни других важных аксиоматических теорий, начиная с арифметики, вещественного анализа,
и т.д. Однако, все математические области взаимосвязаны, и чтобы заниматься математикой в комплексе нужна какая-то общая база,
“аксиоматическая теория математических кирпичей”, в которую отображаются отдельные аксиоматические теории вроде геометрии Евклида
и арифметики Пеано.

В конце XIX века Готтлоб Фреге (основываясь на огромном корпусе работ Георга Кантора и Рихарда Дедекинда) предложил использовать в
этом качестве, в качестве общематематической базы, аксиоматическую теорию, предметом рассмотрения которой является сами логические
предикаты этой теории: исчисление предикатов с рефлексией.

В отличие от других аксиоматических теорий, таких как геометрия Евклида или арифметика Пеано, эта теория не аппелирует ни к какой
внешней предметной области для обоснования своих постулатов: не считая законов логики, в ней постулируется только принцип
абстракции Фреге:  
  **всякое свойство определяет, и притом однозначно, множество всех элементов, обладающих этим свойством.**

То есть для каждого предиката `φ[x]`, определимого на языке логики предикатов, дополненной бинарным отношением принадлежности (∈),
постулируется по аксоме вида `∃!(S) x ∈ S ⇔ φ[x]`.

Тут нужно подчеркнуть, что слово “множество“ используется тут не в обыденном, а в специальном смысле. Тут множества — объектификация предикатов
о самих же себе. Однако использование этого слова дало название всей теории — теория множеств, позже известная как **наивная теория множеств**.

# Понятие множества в основаниях математики и теоретико-множественный редукционизм

При первом знакомстве, множества обычно изображают как кружочки, содержащие которых буквы, цифры или точки. В формулировках задач и теорем
часто упоминают (в том числе бесконечные) множества чисел, множества точек, множества решений каких-нибудь уравнений. Всё это апостериорные
множества, множеста каких-то наперёд определённых объектов. В комбинаторике рассматривают множества абстрактных различимых объектов, лишенных
внутренней структуры. Апостериорные множества ещё называются неупорядоченными наборами без повторений, и являются одним из распространённых
типов материальных стуктур наряду с упорядоченными наборами, неупорядоченными наборами с повторениями и т. д.

Так вот, теория множеств не про них. Теории множеств изучают априорные множества, “множества сами по себе”. Они напоминают апостериорные 
множества тем, что их тоже можно рассматривать как “неупорядоченные наборы без повторений”, но элементы не какие-то объекты самостоятельной
природы, а другие такие же множества.

Но как же себе их вообще представить, если нет никаких “первичных элементов”? На помощь приходит пустое множество ∅, которое можно
сконструировать безо всяких первичных элементов. Используя его в качестве элемента, можно построить множество {∅} — множество, содержащее 
пустое множество и только его. Дальше можно построить множество {∅, {∅}}, элементами которого являются два приведённых прежде множества:
пустое и оболочку пустого. Продолжая в том же духе, можно сконструировать множества любого конечного размера.

Предмет рассмотрения теории множеств (всех теорий множеств, предназначенных для использования в качестве общематематической базы) — такие
вот абстрактные вложенные множества. Абстрактные вложенные множества весьма искуственные и причудливые математические объекты, но они
отождествляются с логическими предикатами о самих себе, что как будто делает их объектами универсальной, чисто логической природы.

Аксиоматические теории могут нуждаться в апостериорных сущностях высшего порядка, например не только “числах”, но и “множествах чисел”
или “функциях на числах”. Наивная теория множеств, оставаясь односортной аксиоматической теорией в рамках логики предикатов, оказывается
теорией сколь-угодно высокого порядка, потому что множества в ней это одновременно множества множеств и множества множеств множеств и т.д.
Создавая возможность говорить о любом предикате этой теории как об объекте этой теории, Фреге конструировал логику сколь угодно высшего
порядка.

В то же время, как видно на примере последовательности множеств конечных размеров ∅, {∅}, {∅, {∅}}, {∅, {∅}, {∅, {∅}}}, ..., абстрактные
вложенные множества, сделанные out of thin air, из вакуума пустых множеств, являются богатым субстратом (“кирпичиками”) для моделирования
любых других математических объектов.

Фреге определяет каждое натуральное число n как “множество всех n-элементных (абстрактных вложенных) множеств”, объективизацию понятия
n-элементности. На этом пути удаётся определить множество всех натуральных чисел, операции сложения и умножения на нём и доказать все
аксиомы арифметики из чистой логики, что известно как [теорема Фреге](https://en.wikipedia.org/wiki/Frege%27s_theorem).

Возможность моделлировать натуральные числа и множества натуральных чисел открывает путь к моделированию практически любых
математических сущностей. Так в фрегеанскую теорию множеств можно транслировать любые другие аксиоматические теории, в том же духе
как компьютерные программы можно транслировать из высокоуровневых языков на низкоуровневый машинный язык.

# Изгнание из рая

Разработка Фреге была философски-математическим раем: из чистой логики, оснащённой способностью к рефлексии, выводится арифметика и
строится общая база для всех разделов математики. Но было это очень недолго, даже не все тома монографии Фреге успели уйти в печать.
Ровно 122 года назад, 16.06.1902, Бертран Рассел написал Готтлобу Фреге письмо относительно монографии Grundgesetze der Arithmetik:
“there is just one point where I have encountered a difficulty.”

Если принять принцип Фреге, получается что существует множество {x | x ∉ x} всех множеств, не содержащих самих себя. Но если оно существует, то
принадлежит ли оно само себе? На этот вопрос невозможен ни положительный, ни отрицательный ответ (это назвается парадоксом Рассела), так что не
может такое множество существовать.

Наивная теория множеств оказалась несостоятельной, а математика вошла в глубокий кризис, полностью её перепахавший и веведший на другой уровень.

Этот, оказавшийся недопустимым, принцип абстракции Фреге позже назвали неограниченным принципом абстракции, потому что чтобы избежать противоречий,
его нужно тем или иным способом ограничить чтобы из него не следовало существование паталогических автореферрентных объектов типа {x | x ∉ x}.

Безупречно красивой фрегеанской общематематической базы не получилось, но за отсутствием альтернатив последовали попытки выделить непротиворечивые
фрагменты теории множеств Фреге, и использовать их в этом качестве.

Когда нужно что-то ограничить, всегда есть два крайних подхода — знаете, как с пищевыми добавками в США и в Европе. В США разрешено всё кроме
заведомо ядовитого. В ЕС запрещено всё, что не имеет доказанной безвредности.

Обжегшись на неограниченном принципе свёртывания математики начала XX века в основном пошли по второму пути: стали рассматривать только множества,
которые можно построить начиная с пустого множества “снизу вверх”, иерархические множества.

Стандартная теория множеств ZF(C) рассматривает только иерархические множества. Вполне допустимые с точки зрения наивной теории множества, допускающие
бесконечные цепочки a ∋ b ∋ c ∋ ··· такими теориями не рассматриваются в принципе, чтобы не дай бог не напороться на паталогические автореферрентные множества.

В отличие от наивной теории множеств, в ZF(C) множества отождествляются с предикатами на множествах уже не точно: не все предикаты оказываются “представимыми”,
то есть выразимыми множествами. К тому же теряется философская красота аксиоматизации: вместо единственного прицнипа абстракции образуется зоопарк аксиом.
Однако, именно этот подход оказался успешен и крайне продуктивен. Непротиворечивость теорий сложнее арифметики неизменно доказывается относительно ZF и её
расширений. Больше того, недавно [[Pa19](https://arxiv.org/abs/1907.00877)] удалось выделить минимальное ядро стандартной теории множеств — уникальную теорию,
доказывающую свою собственную непротиворечивость. В этой теории невозможно доказать существование бесконечного множества, невозможно транслировать в неё
арифметику и поэтому к ней оказывается неприменима теорема Гёделя, запрещающая теориям, в которые можно транслировать арифметику, доказывать свою
непротиворечивость. ZF и её расширения, используемые для моделлирования других теорий, получаются из этого самоверифицирующегося ядра добавлением аксиом
о существовании бесконечных множеств:  
– Существует бесконечная вселенная фон Неймана (множество всех наследственно конечных множеств) — эта теория множеств равна по моделирующей силе арифметике  
– Существует второй бесконечный универсум фон Неймана — вещественному анализу  
– Существует счётная иерархия бесконечных вселенных фон Неймана — теории множеств Цермело Z  
– Существует ординальная иерархия бесконечных вселенных фон Неймана — стандартной теории множеств ZF(C)  
– Существует счётная иерархия вселенных Гротендика — теории множеств для нужд теории топосов  
– Существует ординальная иерархия вселенных Гротендика — теории множеств Тарского-Гротендика  
– Существует ординальная иерархия вселенных Mahlo — теории множеств для неограниченной теории категорий[[Sh08](https://arxiv.org/abs/0810.1279)]  
– Существует ординальная иерархия вселенных Вудина  
··· и далее к звёздам

# Система NF

Попытка пойти по пути ”запретить только заведомо ядовитое“ — система NF, разработанная в 1937 философом и математиком Уиллардом Куайном. Название происходит от
названия статьи New Foundations for Mathematical Logic, где эта система описывается. Как и наивная теория множеств, эта система состоит из логики предикатов с 
экстенциональным равенством и одной единственной схемой аксиом — принципом абстракции, но уже ограниченным синтаксически: всякое свойство, описуемое
стратифицируемой логической формулой, определяет множество множеств, обладающих этим свойством. Тут стратифицируемость — некое синтаксической свойство
формулы (не буду вдаваться в технические подробности), защищающее от паталогических автореферрентных множеств.

На практике NF оказалась не такой уж удобной штукой, но очень интересной философски. В частности, количественные числа (кардиналы) там можно определить как завещал
Фреге — как классы эквивалентности множеств по взаимно-однозначной сопостовляемости. В ZF приходится проявлять произвол и выбирать какой-то конкретный (один из
нескольких естественных) способов кодирования натуральных чисел множествами, а в NF это просто кардинал “2” это совокупность всех двухэлементных множеств, и это
канонический выбор, объектификация понятия двухэлементности.

Кроме того, NF, её интуиционистский вариант и их расширения — уникальные система оснований математики, допускающие предельные структуры, содержащие сами себя:
- множество всех множеств,
- множеств всех ординалов,
- категорию всех категорий.

Но чтобы математики всерьёз занимались NF, было необходимо было показать её непротиворечивость относительно стаднартной теории множеств. На протяжении более чем
80 лет это ни у кого не получалось. Потом Randall Holmes выложил препринт такого доказательства. Только никто не был готов делать peer review этой статьи.
Сам же автор во введении употребляет фразу ‘insanely involved with nasty bookkeeping’ (безумно насыщено монструозной бухгалтерией) в отношении своего доказательства.
И вот вместо того чтобы ждать пока кто-то снизойдёт до проверки этого монстуруозного доказательства, они с аспиранткой Sky Wilshaw взяли и формализовали доказательство,
так что его проверил компьютер.
https://www.logicmatters.net/.../21/nf-really-is-consistent/

# Почему из NF не вышло “новых оснований”, и где её ниша

NF оказалась не особенно удобна на практике. Всё дело в том, распространённые практические применения теории множеств используют как раз не гигантические
всеобъемлющие структуры, а обозримые иерархические множества. А при работе с такими множествами стратифицируемость формул при
использовании принципа абстракции не требуется и очень мешает.

Что мешает — это понятно сразу как попробуешь хоть немного практически поработать в рамках NF, а вот что “не требуется” — этого, конечно, изначально тоже
никто не знал.  В 1956 году Вильгельм Аккерман предложил свой вариант теории множеств (AST), где область рассмотрения не ограничивается только иерархическими
множествами, а принцип абстракци тоже ограничивается по либеральной схеме ”запретить только заведомо ядовитое“, но совсем по-другому чем в NF.

В теории Аккермана постулируется константа V — множество иерархических множеств (само по себе не являющееся иерархическим), а принцип абстракции разбивается на
два аспекта — выделение и рефлексия.

Выделение {x ∈ V | φ(x)} позволяет безо всяких ограничений на предикат φ строить подмножества V, удовлетворяющие этому предикату. Т.е. для любого предиката φ
существует множество иерархических, удовлетворяющих этому предикату.

Рефлексия же постулирует, что всякий предикат, кванторы в котором могут быть ограничены на V без изменения смысла, определяет множество (не обязательно иерархическое):
```
 φ ⇔ φᵛ
–––––—––––
{x | φ(x)}
```

AST является расширением ZF в том смысле, что её язык позволяет говорить не только об иерархических множествах, как ZF, но и о множестве V (всех иерархических множеств)
или Ord (всех иерархических ординалов), более того такие неиерархические множества могут быть элементами других множеств, что выгодно отличает эту теорию от
распостранённой теории NBG.

В 1970 году было показано, что эта теория является эквиконсистентным консервативным расширением ZF:
1) любое утверждение про иерархические множества доказуемо в AST тогда и только тогда, когда оно доказуемо в ZF;
2) из непротиворечивости ZF следует непротиворечивость AST и обратно.

Таким образом выходит что если ограничиваться иерархическими множествами, либеральный и минималистский подход совпадают.

Стоп! Так если в AST уже есть V и Ord, чем вообще хороша NF?! — А тем, что в AST ни V (всех иерархических множеств), ни Ord (всех иерархических ординалов),
не содержат сами себя — они ведь не являются сами иерархическими, избегая таким образом автореферрентности.
В то время как в NF возможны “настоящие” всеобъемлющие структуры.

Вот за этим и нужна NF. Сейчас в XXI веке едва ли кто-то будет всерьёз рассматривать голую NF в качестве ‘новой, более хорошей общематематической базой’.
Она полезна как самостоятельная теория, чей предмет изучения — автореферрентные предельные структуры, такие как “категория” всех категорий (включая себя),
и её скелет — “множество” всех ординалов, которое само по себе вполне-упорядочено, и таким образом само является ординалом. Ну и конечно же “множество”
всех множеств (включая себя) и скелет “категории” всех множеств — “множество” всех кардиналов (мощностей множеств), которое само имеет какую-то мощность,
и таким образом опосредованно входит в себя.

В рамках теорий иерархических множеств о них вообще невозможно рассуждать — там по определению речь только о множествах, не содержащих себя ни прямо,
ни опосредованно. Кроме NF вообще не существует никаких известных способах вообще “думать” о предельных автореферрентных структурах.

Без NF парадоксы Кантора и Бурали-Форти (про множество кардиналов и ординалов) можно обсуждать только “по-философски”, как древние греки объясняли действие
всасывающих насосов тем, что природа боится пустоты или другими умозрительными принципами. А с NF мы можем в каком-то смысле “обнаружить атмосферное давление”.

В NF оказывается, что диагональный метод Кантора работает не всегда, т.к. в ходе доказательства используется нестратифицируемое свойство. И соответственно там
могут быть неканторианские “множества”, мощность которых не увеличивается когда мы строим множество всех их подмножеств. Таково множество всех множеств — оно
само себе множество всех своих подмножеств.

Там мы действительно можем определить “множество” всех кардиналов и обнаружить что его собственная мощность — предельный кардинал. И это но это не вызывает
противоречия потому что оно, разумеется, тоже неканторианское.

А парадокс Бурали-Форти разрешается в некотором смысле “в другую сторону”. В NF не все ординалы представимы как множества всех ординалов меньше, а свойство
“представимости” нестратитифицируемо, и таким образом не существует множества всех представимых ординалов. А вот “множество” вообще всех ординалов существует,
и является само по себе ординалом, но непредставимым и не предельным — над ним ещё сколь угодно много непредставимых ординалов.


# Настоящие “Новые основания”

Сейчас, в конце первой четверти XXI века, наконец выкристаллизовался альтернативный подход к общематематической базе. Работы ещё не закончены,
но уже очевижно, что исчисление предикатов можно обобщить до высше-категорного исчисления построений[[GWB24](https://arxiv.org/abs/2407.09146)] —
расширяемого языка, на котором описываются не только формулировки аксиом и теорем, но ещё и построения (такие, как, например геометрические построения,
алгоритмы, и самое главное — доказательства), причём с учётом соответствий и связей между ними.

Исчисления построений это не аксиоматические теории поверх исчисления предикатов, а системы другого рода — типизированные
алгебраические теории (также известные как type theories) — теории, гарантированно имеющие свободную, синтаксическую модель, и её расширения, 
описываемые в терминах образующих и тождеств. В случае исчислений построений, образующие — это сигнатуры, а тождества — аксиомы описываемых
поверх исчисления построений аксиоматических теорий. Алгебраическая природа исчисления построений гарантирует, что расширения свободно комбинируются,
и таким образом мы получаем возможность работать на одном общем языке со всеми разделами математики напрямую, без трансляции
в какую-либо “теорию математических кирпичей”. Работа без трансляции имеет массу преимуществ, ведь при трансляции на низкоуровневый язык (хоть в
математике, хоть в программировании) высокоуровневые объекты, такие как геометрические фигуры, группы симметрий, матрицы или вещественные числа,
превращаются в кашу из множеств или битов соответственно, и с этой кашей становится практически невозможно работать напрямую. Устранение трансляции
делает математическую работу одновременно более прозрачной концептуально, и более удобной практически.

Таким образом исчезает потребность в использовании некой “аксиоматической теории общематематических кирпичей” в качестве общематематической базы. 
Но новый подход не делает теории множеств устаревшими, он просто ставит их на естественное место в общей картине математики:
Для развития теории рекурсии (ординалы) и теории предельных структур (ультрафильтры) в рамках современного подхода требуется ввести понятие
транзитивных вселенных — типов типов, каждый элемент которых канонически является их собственным подмножеством. Транзитивные вселенные и их
подмножества — это в точности и есть объекты исследования теорий множеств. Как самостоятельная (и развивающаяся) область математики, теории множеств
изучают тонкую структуру транзитивных вселенных. Не смотря на полтора столетия развития, там до сих пор бурлит жизнь и регулярно происходят новые открытия,
например работа в рамках крупной исследовательской программы “Woodin's Ultimate L conjecture”, которая представляет собой систематический план развития в
этой области.

Кроме того, стандартные теории множеств продолжат играть важную роль в вопросах оснований математики — они остаются субстратом для построения моделей других
теорий и доказательства их непротиворечивости/измерения из моделлирующей силы.
